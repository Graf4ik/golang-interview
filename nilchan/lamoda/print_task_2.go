package lamoda

import (
	"fmt"
	"runtime"
	"time"
)

// —á—Ç–æ –≤—ã–≤–µ–¥–µ—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º–∞
func main() {
	runtime.GOMAXPROCS(1)

	var n int
	go func() {
		for {
			n++
			runtime.Gosched() // –æ—Ç–¥–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥—Ä—É–≥–∏–º
		}
	}()

	time.Sleep(500 * time.Second)
	fmt.Println("Done")
}

/*
ü§î –ü–æ—á–µ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –≤—ã–≤–µ–¥–µ—Ç Done?
–£ —Ç–µ–±—è —Ç–æ–ª—å–∫–æ 1 –ø–æ—Ç–æ–∫ (GOMAXPROCS = 1)

–ì–æ—Ä—É—Ç–∏–Ω–∞ go func() –Ω–∞—á–∏–Ω–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –∏ –Ω–µ –æ—Ç–¥–∞—ë—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Äî –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ –µ—ë –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ –Ω–µ—Ç
–Ω–∏ –æ–¥–Ω–æ–π —Ç–æ—á–∫–∏, –≥–¥–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è

–ì–æ—Ä—É—Ç–∏–Ω–∞ main() –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –ø–æ—Å–ª–µ time.Sleep, –ø–æ—Ç–æ–º—É —á—Ç–æ –µ—ë –ø—Ä–æ—Å—Ç–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–ª–∞–Ω–∏—Ä—É—é—Ç
üí° –≠—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è "goroutine starvation" ‚Äî –æ–¥–Ω–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –∑–∞–Ω—è–ª–∞ –≤–µ—Å—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫.
*/
